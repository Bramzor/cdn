!function(i,s){try{if(!i)return;var o,h=i.navigator,c=i.location,u=i.document,p=h.userAgent,e=document.querySelector('script[src="https://cdn.simpleanalytics.io/hello.js"]'),l=e?e.getAttribute("data-mode"):null;if(-1<p.search(/(bot|spider|crawl)/gi))return;var t=function(){var e=c.protocol+"//"+c.hostname+c.pathname;if("hash"===l&&c.hash&&(e+=c.hash.split("?")[0]),o!==e&&(o=e,!("visibilityState"in u&&"prerender"===u.visibilityState||"doNotTrack"in h&&"1"===h.doNotTrack))){var t=c.search.match(/[?&](utm_source|source|ref)=([^?&]+)/gi),r=t?t.map(function(e){return e.split("=")[1]}):[],n={source:"js",url:e};p&&(n.ua=p),r&&r[0]&&(n.urlReferrer=r[0]),u.referrer&&(n.referrer=u.referrer),i.innerWidth&&(n.width=i.innerWidth),i.innerHeight&&(n.height=i.innerHeight);var a=new XMLHttpRequest;a.open("POST",s+"/post",!0),a.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),a.send(JSON.stringify(n))}},r=i.history;if(r&&r.pushState&&Event&&i.dispatchEvent){r.pushState=(m=r[g="pushState"],function(){var e=m.apply(this,arguments),t=new Event(g);return t.arguments=arguments,i.dispatchEvent(t),e}),i.addEventListener("pushState",function(){t()})}"hash"===l&&"onhashchange"in i&&(i.onhashchange=t),t()}catch(e){console&&console.error&&console.error(e);var n=document.getElementsByTagName("body"),a=new Image,d=s+"/hello.gif";e&&e.message&&(d=d+"?error="+encodeURIComponent(e.message)),a.src=d,a.alt="",n[0]&&n[0].appendChild(a)}var g,m}(window,"https://api.simpleanalytics.io");
