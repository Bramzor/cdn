!function(o,h){try{if(!o)return;var c,u=o.navigator,p=o.location,l=o.document,d=u.userAgent,e=document.querySelector('script[src="https://cdn.simpleanalytics.io/hello.js"]'),m=e?e.getAttribute("data-mode"):null;if(-1<d.search(/(bot|spider|crawl)/gi))return;var t=function(e){var t=e&&e.isPushState,r=p.protocol+"//"+p.hostname+p.pathname;if("hash"===m&&p.hash&&(r+=p.hash.split("?")[0]),c!==r&&(c=r,!("visibilityState"in l&&"prerender"===l.visibilityState||"doNotTrack"in u&&"1"===u.doNotTrack))){var n=p.search.match(/[?&](utm_source|source|ref)=([^?&]+)/gi),a=n?n.map(function(e){return e.split("=")[1]}):[],s={source:"js",url:r};d&&(s.ua=d),a&&a[0]&&(s.urlReferrer=a[0]),l.referrer&&!t&&(s.referrer=l.referrer),o.innerWidth&&(s.width=o.innerWidth);var i=new XMLHttpRequest;i.open("POST",h+"/post",!0),i.setRequestHeader("Content-Type","text/plain; charset=UTF-8"),i.send(JSON.stringify(s))}},r=o.history;if(r&&r.pushState&&Event&&o.dispatchEvent){r.pushState=(f=r[i="pushState"],function(){var e=f.apply(this,arguments),t=new Event(i);return t.arguments=arguments,o.dispatchEvent(t),e}),o.addEventListener("pushState",function(){t({isPushState:!0})})}"hash"===m&&"onhashchange"in o&&(o.onhashchange=t),t()}catch(e){console&&console.error&&console.error(e);var n=document.getElementsByTagName("body"),a=new Image,s=h+"/hello.gif";e&&e.message&&(s=s+"?error="+encodeURIComponent(e.message)),a.src=s,a.alt="",n[0]&&n[0].appendChild(a)}var i,f}(window,"https://api.simpleanalytics.io");
